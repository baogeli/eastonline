<include file="header" />
<style>
    span {
        color: darkgrey ;
    }
</style>

<script type="text/javascript">

</script>
<!-- Begin page content -->
    <div class="row">
        <h1></h1>
    </div>
    <div class="row">
        <h1></h1>
    </div>
    <div class="row">
        <h1></h1>
    </div>
    <hr>

    <p class="lead">编辑 TOP100</p>


<!--bootstrap input -->
        <form action="__URL__/addLandMark" method="POST" class="form-horizontal" enctype="multipart/form-data">
            <div class="form-group">
                <label  class="col-sm-2 control-label">标题</label>
                <div class="col-sm-4">
                    <input type="text" name="title" value="{$lm.title}" class="form-control" placeholder="">
                </div>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">地标地址</label>
                <div class="col-sm-4">
                    <input type="text"  name="address" value="{$lm.address}" class="form-control" placeholder="">
                </div>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">获取GPS地址</label>
                <div class="col-sm-4">
                    <input type="text" id="address" name="gps_address" value="{$lm.gps_address}" class="form-control" placeholder="输入地址点击获取按钮,地图中按左键取点">
                </div>
                <div class="col-sm-2">
                    <button type="button" class="btn btn-info" onclick="getCoord()">获取坐标</button>
                </div>
            </div>

            <!--地图显示-->
            <div class="form-group">
                <label  class="col-sm-2 control-label"></label>
                <div class="col-sm-4">
                    <div id="allmap"></div>
                </div>
            </div>

            <!--东经，北纬-->
            <div class="form-group">
                <label  class="col-sm-2 control-label"></label>
                <div class="col-sm-4">
                    <label  class="col-sm-2 control-label">东经</label>
                    <div class="col-sm-4">
                        <input type="text" id="e" name="e" value="{$lm.e}" class="form-control" placeholder="">
                    </div>

                    <label  class="col-sm-2 control-label">北纬</label>
                    <div class="col-sm-4">
                        <input type="text" id="n" name="n" value="{$lm.n}" class="form-control" placeholder="">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">座机</label>
                <div class="col-sm-4">
                    <input type="text" name="telphone" value="{$lm.telphone}" class="form-control" placeholder="">
                </div>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">排序</label>
                <div class="col-sm-4">
                    <input type="text" name="score" value="{$lm.score}" class="form-control" placeholder="">
                </div>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">是否top100</label>
                <div class="col-sm-4">
                    <input type="checkbox" name="is_top" value="1" <if condition="($lm.is_top eq 1 )">value="1" checked="checked"</if> class="form-control" placeholder="">
                </div>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">封面图</label>
                <div class="col-sm-4">
                    <input type="file" name="image0" class="form-control" placeholder="">
                </div>
                <label  class="col-sm-2 control-label">{$lm.image0}</label>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">竖条图</label>
                <div class="col-sm-4">
                    <input type="file" name="image1" class="form-control" placeholder="">
                </div>
                <label  class="col-sm-2 control-label">{$lm.image1}</label>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">第一个小图</label>
                <div class="col-sm-4">
                    <input type="file" name="image2" class="form-control" placeholder="">
                </div>
                <label  class="col-sm-2 control-label">{$lm.image2}</label>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">横条图</label>
                <div class="col-sm-4">
                    <input type="file" name="image3" class="form-control" placeholder="">
                </div>
                <label  class="col-sm-2 control-label">{$lm.image3}</label>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">第二个小图</label>
                <div class="col-sm-4">
                    <input type="file" name="image4" class="form-control" placeholder="">
                </div>
                <label  class="col-sm-2 control-label">{$lm.image4}</label>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">地标分类</label>
                <div class="col-sm-2">
                    <select class="form-control" name="type">
                        <if condition="$lm.type neq null">
                            <option value="{$lm.type}" selected="selected">{$tn.$lm[type]}</option>
                        </if>
                        <option value="-1">未选择</option>
                        <option value="1">聚</option>
                        <option value="2">购</option>
                        <option value="3">品</option>
                        <option value="4">宿</option>
                        <option value="5">食</option>
                    </select>
                </div>
                <label  class="col-sm-2 control-label"></label>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">地标归属区域</label>
                <div class="col-sm-2">
                    <select class="form-control" name="area">
                        <if condition="$lm.area neq null">
                            <option value="{$lm.area}" selected="selected">{$an.$lm[area]}</option>
                        </if>
                        <option value="-1">未选择</option>
                        <option value="1">黄浦区</option>
                        <option value="2">杨浦区</option>
                        <option value="3">普陀区</option>
                        <option value="4">虹口区</option>
                        <option value="5">静安区</option>
                        <option value="6">徐汇区</option>
                        <option value="7">长宁区</option>
                        <option value="8">浦东新区</option>
                        <option value="9">闵行区</option>
                        <option value="10">卢湾区</option>
                        <option value="11">宝山区</option>
                        <option value="12">松江区</option>
                    </select>
                </div>
                <label  class="col-sm-2 control-label"></label>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">标签分类</label>
                <div class="col-sm-2">
                    <select class="form-control" name="tag">
                        <if condition="$lm.tag neq null">
                            <option value="{$lm.tag}" selected="selected">{$gn.$lm[tag]}</option>
                        </if>
                        <option value="0">未选择</option>
                        <option value="1">买手推荐</option>
                        <option value="2">小文艺</option>
                        <option value="3">不眠夜</option>
                        <option value="4">地铁沿线</option>
                    </select>
                </div>
                <label  class="col-sm-2 control-label"></label>
            </div>

            <div class="form-group">
                <label  class="col-sm-2 control-label">内容</label>
                <div class="col-sm-4">
                    <textarea name="content" class="form-control" rows="5">{$lm.content}</textarea>
                </div>
                <div class="col-sm-4">
                    <input type="hidden" name="id" value="{$lm.landmark_id}">
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-2"></div>
                <div class="col-sm-4">
                    <button type="submit" class="btn btn-info">Submit</button>
                </div>
                <div class="col-sm-4">
                </div>
            </div>
        </form>
        <script type="text/javascript">
            // 百度地图API功能
            var map = new BMap.Map("allmap");
            //
//            var n = document.getElementById('n').value;
//            var e = document.getElementById('e').value;
            <if condition="$lm.n eq null">
                map.centerAndZoom("上海", 15);
            <else />
                map.centerAndZoom(new BMap.Point({$lm.n},{$lm.e}),15);
                var point = new BMap.Point({$lm.n}, {$lm.e} );
                var mark  = new BMap.Marker(point);
                map.addOverlay(mark);
            </if>
            //
            map.enableScrollWheelZoom(true);  //  地图缩放
            var local = new BMap.LocalSearch(map, {
                renderOptions:{map: map}
            });
            //单击获取点击的经纬度
            map.addEventListener("click",function(e){
                map.clearOverlays();    //清除地图上所有覆盖物
                //alert(e.point.lng + "," + e.point.lat);
                document.getElementById('n').value = e.point.lng;
                document.getElementById('e').value = e.point.lat;
                var point = new BMap.Point(e.point.lng, e.point.lat);
                var mark  = new BMap.Marker(point);
                map.addOverlay(mark);
            });

//            local.search("浦驰路188弄");

            function getCoord() {
                var address = document.getElementById('address').value;
                //  按地址搜索结果
                local.search(address);
                //  坐标填充到input框里

            }
        </script>
    <hr>

<include file="footer" />




